"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class DutyChain {
    constructor(fn) {
        this.fn = fn;
    }
    async handleRequest(...outer) {
        const next = async (...args) => {
            if (!this.next || !this.next.handleRequest)
                return;
            const result = await this.next.handleRequest(...args);
            console.log(result);
            return result;
        };
        return await this.fn(...outer, next);
    }
    setNext(successor) {
        this.next = successor;
        return this.next;
    }
}
exports.default = DutyChain;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHV0eUNoYWluLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2R1dHlDaGFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQXFCLFNBQVM7SUFHNUIsWUFBWSxFQUFFO1FBQ1osSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDZixDQUFDO0lBRUQsS0FBSyxDQUFDLGFBQWEsQ0FBQyxHQUFHLEtBQUs7UUFDMUIsTUFBTSxJQUFJLEdBQUcsS0FBSyxFQUFFLEdBQUcsSUFBSSxFQUFFLEVBQUU7WUFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWE7Z0JBQUUsT0FBTztZQUVuRCxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7WUFDdEQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNwQixPQUFPLE1BQU0sQ0FBQztRQUNoQixDQUFDLENBQUM7UUFDRixPQUFPLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRUQsT0FBTyxDQUFDLFNBQVM7UUFDZixJQUFJLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQztRQUV0QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDbkIsQ0FBQztDQUNGO0FBdkJELDRCQXVCQyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIER1dHlDaGFpbiB7XG4gIG5leHQ6IGFueTtcbiAgZm46IEZ1bmN0aW9uO1xuICBjb25zdHJ1Y3Rvcihmbikge1xuICAgIHRoaXMuZm4gPSBmbjtcbiAgfVxuXG4gIGFzeW5jIGhhbmRsZVJlcXVlc3QoLi4ub3V0ZXIpIHtcbiAgICBjb25zdCBuZXh0ID0gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICAgIGlmICghdGhpcy5uZXh0IHx8ICF0aGlzLm5leHQuaGFuZGxlUmVxdWVzdCkgcmV0dXJuO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm5leHQuaGFuZGxlUmVxdWVzdCguLi5hcmdzKTtcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZm4oLi4ub3V0ZXIsIG5leHQpO1xuICB9XG5cbiAgc2V0TmV4dChzdWNjZXNzb3IpIHtcbiAgICB0aGlzLm5leHQgPSBzdWNjZXNzb3I7XG5cbiAgICByZXR1cm4gdGhpcy5uZXh0O1xuICB9XG59XG4iXX0=